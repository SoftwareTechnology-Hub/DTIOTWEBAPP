{% extends "global/base.html" %}
{% block content %}

<style>
    /* â”€â”€ Reset & Base â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; }

    .profile-container { max-width: 800px; margin: 0 auto; padding: 1rem; }

    .page-title { font-size: 1.5rem; font-weight: 600; color: #1f2937; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem; }
    .page-title::before { content: ''; width: 4px; height: 24px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 2px; flex-shrink: 0; }

    /* â”€â”€ Cards â”€â”€ */
    .profile-card, .api-section, .help-section {
        background: #ffffff; border-radius: 12px; padding: 1.25rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e5e7eb; margin-bottom: 1rem;
    }

    /* â”€â”€ Profile Header â”€â”€ */
    .profile-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.25rem; padding-bottom: 1rem; border-bottom: 2px solid #f3f4f6; }
    .profile-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .profile-icon svg { width: 22px; height: 22px; stroke: white; }
    .profile-heading { font-size: 1.1rem; font-weight: 600; color: #1f2937; margin: 0; }

    /* â”€â”€ Info Rows â”€â”€ */
    .info-row { display: flex; flex-direction: column; gap: 0.5rem; padding: 1rem 0; border-bottom: 1px solid #f3f4f6; }
    .info-row:last-child { border-bottom: none; padding-bottom: 0; }
    .info-row:first-child { padding-top: 0; }
    .info-label { font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; }
    .info-value { font-size: 0.95rem; font-weight: 500; color: #1f2937; word-break: break-word; }

    /* â”€â”€ API Section â”€â”€ */
    .api-title { font-size: 1.1rem; font-weight: 600; color: #1f2937; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
    .api-title svg { width: 18px; height: 18px; stroke: #10b981; flex-shrink: 0; }
    .api-key-container { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 10px; padding: 0.875rem; display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1rem; }
    .api-key-text { font-family: 'Courier New', monospace; font-size: 0.78rem; color: #1f2937; word-break: break-all; line-height: 1.5; }

    /* â”€â”€ Buttons â”€â”€ */
    .copy-button { background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 0.75rem 1rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.875rem; font-weight: 500; transition: all 0.2s ease; white-space: nowrap; width: 100%; min-height: 44px; }
    .copy-button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(16,185,129,0.3); }
    .copy-button:active { transform: translateY(0); }
    .copy-button svg { width: 16px; height: 16px; stroke: white; fill: none; flex-shrink: 0; }
    .copy-button.copied { background: linear-gradient(135deg, #059669, #047857); }
    .regenerate-form { display: flex; width: 100%; }
    .regenerate-button { background: transparent; color: #ef4444; border: 2px solid #ef4444; padding: 0.6rem 1rem; border-radius: 8px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; gap: 0.4rem; width: 100%; min-height: 44px; }
    .regenerate-button:hover { background: #ef4444; color: white; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(239,68,68,0.3); }
    .regenerate-button svg { width: 14px; height: 14px; stroke: currentColor; flex-shrink: 0; }

    /* â”€â”€ Flash Messages â”€â”€ */
    .message-container { background: linear-gradient(135deg, #d1fae5, #a7f3d0); border: 1px solid #10b981; border-radius: 10px; padding: 0.875rem 1rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem; animation: slideIn 0.3s ease; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .message-container svg { width: 18px; height: 18px; stroke: #059669; flex-shrink: 0; }
    .message-text { color: #059669; font-weight: 500; font-size: 0.875rem; line-height: 1.4; }

    /* â”€â”€ Help Section â”€â”€ */
    .section-header { font-size: 1.1rem; font-weight: 600; color: #1f2937; margin-bottom: 1.25rem; display: flex; align-items: center; gap: 0.75rem; }
    .section-header svg { width: 20px; height: 20px; stroke: #10b981; flex-shrink: 0; }
    .help-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 10px; padding: 1.25rem; margin-bottom: 1rem; }
    .help-card:last-child { margin-bottom: 0; }
    .help-card-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.25rem; padding-bottom: 0.875rem; border-bottom: 2px solid #e5e7eb; }
    .help-card-header svg { width: 18px; height: 18px; stroke: #10b981; flex-shrink: 0; }
    .help-card-header h4 { font-size: 1rem; font-weight: 600; color: #1f2937; margin: 0; }
    .help-content { display: flex; flex-direction: column; gap: 1.25rem; }
    .help-step { display: flex; gap: 0.875rem; align-items: flex-start; }
    .step-number { background: linear-gradient(135deg, #10b981, #059669); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85rem; flex-shrink: 0; }
    .step-content { flex: 1; min-width: 0; }
    .step-content h5 { font-size: 0.95rem; font-weight: 600; color: #1f2937; margin: 0 0 0.5rem 0; }
    .step-content p { font-size: 0.85rem; color: #6b7280; margin: 0 0 0.75rem 0; line-height: 1.6; }

    /* â”€â”€ Code Blocks â”€â”€ */
    .code-block { background: #1f2937; border-radius: 8px; padding: 0.875rem; margin-top: 0.5rem; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .code-block code { font-family: 'Courier New', monospace; font-size: 0.72rem; color: #10b981; white-space: pre; display: block; line-height: 1.5; }

    /* â”€â”€ Language Tabs â”€â”€ */
    .lang-tabs { display: flex; flex-wrap: wrap; gap: 0.4rem; margin-bottom: 0; }
    .lang-tab-btn { display: flex; align-items: center; gap: 0.35rem; padding: 0.45rem 0.75rem; border-radius: 8px 8px 0 0; border: 1px solid #e5e7eb; border-bottom: none; background: #f3f4f6; color: #6b7280; font-size: 0.78rem; font-weight: 600; cursor: pointer; transition: all 0.15s ease; position: relative; bottom: -1px; font-family: inherit; min-height: 36px; }
    .lang-tab-btn .dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
    .lang-tab-btn.active { background: #1f2937; color: #10b981; border-color: #1f2937; }
    .lang-tab-btn:hover:not(.active) { background: #e5e7eb; color: #1f2937; }
    .lang-panel { display: none; background: #1f2937; border-radius: 0 8px 8px 8px; border: 1px solid #1f2937; overflow: hidden; }
    .lang-panel.show { display: block; }
    .lang-panel-header { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0.875rem; background: #111827; border-bottom: 1px solid #374151; flex-wrap: wrap; gap: 0.4rem; }
    .lang-panel-header span { font-family: 'Courier New', monospace; font-size: 0.68rem; color: #6b7280; word-break: break-all; flex: 1; }
    .btn-copy-code { background: transparent; border: 1px solid #374151; border-radius: 5px; color: #6b7280; font-size: 0.7rem; padding: 0.25rem 0.6rem; cursor: pointer; font-family: inherit; font-weight: 600; transition: all 0.15s ease; white-space: nowrap; flex-shrink: 0; min-height: 28px; }
    .btn-copy-code:hover { color: #10b981; border-color: #10b981; }

    /* â”€â”€ Explanation Table â”€â”€ */
    .code-explain { margin-top: 1rem; background: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden; }
    .explain-title { font-size: 0.75rem; font-weight: 700; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; padding: 0.6rem 1rem; background: #f9fafb; border-bottom: 1px solid #e5e7eb; }
    .explain-row { display: flex; flex-direction: column; gap: 0.25rem; padding: 0.65rem 1rem; border-bottom: 1px solid #f3f4f6; }
    .explain-row:last-child { border-bottom: none; }
    .explain-code { font-family: 'Courier New', monospace; font-size: 0.7rem; color: #10b981; background: #1f2937; border-radius: 4px; padding: 0.15rem 0.45rem; display: inline-block; word-break: break-all; }
    .explain-text { font-size: 0.8rem; color: #6b7280; line-height: 1.5; }

    /* â”€â”€ Error Reference Tables â”€â”€ */
    .error-table-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; border-radius: 8px; border: 1px solid #e5e7eb; margin-top: 0.75rem; }
    .error-table { width: 100%; border-collapse: collapse; font-size: 0.78rem; min-width: 520px; }
    .error-table thead tr { background: #1f2937; }
    .error-table thead th { color: #10b981; font-weight: 700; padding: 0.65rem 0.875rem; text-align: left; white-space: nowrap; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.4px; }
    .error-table tbody tr { border-bottom: 1px solid #f3f4f6; background: white; }
    .error-table tbody tr:last-child { border-bottom: none; }
    .error-table tbody tr:hover { background: #f9fafb; }
    .error-table td { padding: 0.65rem 0.875rem; color: #374151; vertical-align: top; line-height: 1.5; }
    .error-table td:first-child { white-space: nowrap; }
    .badge { display: inline-block; font-family: 'Courier New', monospace; font-size: 0.68rem; font-weight: 700; padding: 0.15rem 0.45rem; border-radius: 4px; }
    .badge-red   { background: #fee2e2; color: #dc2626; }
    .badge-orange{ background: #ffedd5; color: #ea580c; }
    .badge-yellow{ background: #fef9c3; color: #ca8a04; }
    .badge-blue  { background: #dbeafe; color: #2563eb; }
    .badge-purple{ background: #ede9fe; color: #7c3aed; }
    .badge-gray  { background: #f3f4f6; color: #4b5563; }
    .badge-green { background: #d1fae5; color: #059669; }
    .msg-code { font-family: 'Courier New', monospace; font-size: 0.7rem; background: #1f2937; color: #10b981; padding: 0.1rem 0.35rem; border-radius: 3px; }

    /* Mobile card view for error tables */
    .error-cards { display: flex; flex-direction: column; gap: 0.6rem; margin-top: 0.75rem; }
    .error-card { background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0.875rem; border-left: 3px solid #10b981; }
    .error-card-top { display: flex; align-items: flex-start; justify-content: space-between; gap: 0.5rem; margin-bottom: 0.5rem; flex-wrap: wrap; }
    .error-card-code { font-size: 0.75rem; color: #374151; line-height: 1.4; flex: 1; min-width: 0; }
    .error-card-body { font-size: 0.78rem; color: #6b7280; line-height: 1.5; }
    .error-card-body strong { color: #374151; }
    .error-card-msg { margin-top: 0.4rem; }

    /* â”€â”€ FAQ â”€â”€ */
    .faq-item { padding: 0.875rem; background: white; border-radius: 8px; border-left: 3px solid #10b981; margin-bottom: 0.75rem; }
    .faq-item:last-child { margin-bottom: 0; }
    .faq-question { display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem; }
    .faq-question svg { width: 14px; height: 14px; stroke: #10b981; flex-shrink: 0; margin-top: 2px; }
    .faq-question strong { color: #1f2937; font-size: 0.875rem; line-height: 1.4; }
    .faq-answer { font-size: 0.8rem; color: #6b7280; line-height: 1.6; margin: 0; padding-left: 1.25rem; }
    .faq-answer code { background: #1f2937; color: #10b981; padding: 0.1rem 0.3rem; border-radius: 3px; font-size: 0.72rem; }

    /* â”€â”€ Support Card â”€â”€ */
    .support-card { background: linear-gradient(135deg, #f0fdf4, #d1fae5); border: 1px solid #10b981; border-radius: 10px; padding: 1.25rem; margin-top: 1rem; }
    .support-content { display: flex; align-items: center; gap: 0.875rem; margin-bottom: 1rem; }
    .support-icon { width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .support-icon svg { width: 20px; height: 20px; stroke: #10b981; }
    .support-text { flex: 1; min-width: 0; }
    .support-text h4 { font-size: 1rem; font-weight: 600; color: #1f2937; margin: 0 0 0.25rem 0; }
    .support-text p { font-size: 0.85rem; color: #059669; margin: 0; line-height: 1.5; }
    .support-actions { display: flex; flex-direction: column; gap: 0.75rem; }
    .support-button { padding: 0.875rem 1.25rem; border-radius: 10px; font-size: 0.875rem; font-weight: 600; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.2s ease; border: none; cursor: pointer; width: 100%; min-height: 44px; }
    .support-button svg { width: 16px; height: 16px; stroke: currentColor; flex-shrink: 0; }
    .support-button.primary { background: linear-gradient(135deg, #10b981, #059669); color: white; }
    .support-button.primary:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(16,185,129,0.3); }
    .support-button.secondary { background: white; color: #10b981; border: 2px solid #10b981; }
    .support-button.secondary:hover { background: #f0fdf4; transform: translateY(-2px); box-shadow: 0 6px 16px rgba(16,185,129,0.15); }

    /* â”€â”€ Section Divider â”€â”€ */
    .sub-section-title { font-size: 0.8rem; font-weight: 700; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; margin: 1.25rem 0 0.5rem 0; display: flex; align-items: center; gap: 0.5rem; }
    .sub-section-title::after { content: ''; flex: 1; height: 1px; background: #e5e7eb; }

    /* â”€â”€ Inline note â”€â”€ */
    .inline-note { font-size: 0.8rem; color: #6b7280; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 6px; padding: 0.5rem 0.75rem; margin: 0.75rem 0 0 0; line-height: 1.5; }
    .inline-note code { background: #1f2937; color: #10b981; padding: 0.1rem 0.3rem; border-radius: 3px; font-size: 0.7rem; }

    /* â”€â”€ Responsive Breakpoints â”€â”€ */
    @media (min-width: 480px) {
        .error-cards { display: none; }
        .error-table-wrap { display: block; }
    }
    @media (max-width: 479px) {
        .error-cards { display: flex; }
        .error-table-wrap { display: none; }
    }

    @media (min-width: 600px) {
        .profile-container { padding: 1.5rem; }
        .page-title { font-size: 1.75rem; margin-bottom: 2rem; }
        .page-title::before { height: 28px; }
        .profile-card, .api-section, .help-section { padding: 1.75rem; border-radius: 14px; margin-bottom: 1.5rem; }
        .profile-icon { width: 44px; height: 44px; }
        .profile-icon svg { width: 24px; height: 24px; }
        .help-card { padding: 1.5rem; }
        .api-title { font-size: 1.2rem; margin-bottom: 1.5rem; }
        .api-key-container { flex-direction: row; align-items: center; padding: 1rem; gap: 1rem; }
        .api-key-text { font-size: 0.875rem; flex: 1; }
        .copy-button { width: auto; min-width: 120px; }
        .section-header { font-size: 1.25rem; }
        .support-actions { flex-direction: row; }
        .support-card { padding: 1.75rem; }
        .explain-row { flex-direction: row; align-items: flex-start; gap: 1rem; }
        .explain-code { flex-shrink: 0; width: 200px; }
        .code-block code { font-size: 0.75rem; }
    }

    @media (min-width: 1024px) {
        .profile-container { padding: 2rem; }
        .profile-card, .api-section, .help-section { padding: 2rem; border-radius: 16px; }
    }

    @media (max-width: 360px) {
        .profile-container { padding: 0.75rem; }
        .page-title { font-size: 1.25rem; }
        .profile-card, .api-section, .help-section { padding: 1rem; }
        .help-card { padding: 1rem; }
        .lang-tab-btn { padding: 0.4rem 0.55rem; font-size: 0.72rem; }
        .support-text h4 { font-size: 0.9rem; }
    }

    @media (prefers-reduced-motion: reduce) { * { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; } }

    /* â”€â”€ Focus styles â”€â”€ */
    .copy-button:focus, .regenerate-button:focus, .support-button:focus, .lang-tab-btn:focus, .btn-copy-code:focus { outline: 3px solid #10b981; outline-offset: 2px; }
</style>

<div class="profile-container">
    <h1 class="page-title">Profile</h1>

    {% if messages %}
        {% for message in messages %}
        <div class="message-container">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
            <span class="message-text">{{ message }}</span>
        </div>
        {% endfor %}
    {% endif %}

    <!-- â”€â”€ Personal Information â”€â”€ -->
    <div class="profile-card">
        <div class="profile-header">
            <div class="profile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            </div>
            <h2 class="profile-heading">Personal Information</h2>
        </div>
        <div class="info-row"><span class="info-label">Name</span><span class="info-value">{{ request.user.first_name }}</span></div>
        <div class="info-row"><span class="info-label">Email</span><span class="info-value">{{ request.user.email }}</span></div>
        <div class="info-row"><span class="info-label">Phone</span><span class="info-value">{{ request.user.phone }}</span></div>
    </div>

    <!-- â”€â”€ API Key â”€â”€ -->
    <div class="api-section">
        <h3 class="api-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></svg>
            Your API Key
        </h3>
        <div class="api-key-container">
            <span class="api-key-text" id="apiKey">{{ request.user.api_key }}</span>
            <button class="copy-button" onclick="copyApiKey()" aria-label="Copy API key to clipboard">
                <svg id="copyIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                <span id="copyText">Copy</span>
            </button>
        </div>
        <form action="{% url 'regenerate_api' %}" method="POST" class="regenerate-form">
            {% csrf_token %}
            <button type="submit" class="regenerate-button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>
                Regenerate API Key
            </button>
        </form>
    </div>

    <!-- â”€â”€ Help & Support â”€â”€ -->
    <div class="help-section">
        <h3 class="section-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            Help &amp; Support
        </h3>

        <!-- Steps Card -->
        <div class="help-card">
            <div class="help-card-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
                <h4>How to Use Your API Key</h4>
            </div>
            <div class="help-content">
                <div class="help-step">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <h5>Copy Your API Key</h5>
                        <p>Click the "Copy" button above to copy your unique API key to clipboard.</p>
                    </div>
                </div>
                <div class="help-step">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <h5>Paste it into Your Script</h5>
                        <p>Open the example code below, find <code style="background:#1f2937;color:#10b981;padding:0.1rem 0.4rem;border-radius:4px;font-size:0.75rem;">YOUR_API_KEY</code> and replace it with your actual key.</p>
                    </div>
                </div>
                <div class="help-step">
                    <span class="step-number">3</span>
                    <div class="step-content">
                        <h5>Run the Script â€” Data Streams Automatically</h5>
                        <p>The script loops forever, reads a sensor value, and sends it to the server every 3 seconds. Pick your language below.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Code Examples Card -->
        <div class="help-card">
            <div class="help-card-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
                <h4>Send Data â€” Example Code</h4>
            </div>

            <p style="font-size:0.82rem;color:#6b7280;margin:0 0 0.875rem 0;line-height:1.6;">
                Choose your language. Every example does the same thing â€” sends a sensor value to your feed every 3 seconds.
                Replace <code style="background:#1f2937;color:#10b981;padding:0.1rem 0.4rem;border-radius:4px;font-size:0.72rem;">YOUR_API_KEY</code> with your key shown above.
            </p>
                        <p class="sub-section-title">FFED API</p>


            <!-- Tabs -->
            <div class="lang-tabs" role="tablist">
                <button class="lang-tab-btn active" onclick="switchLang('py',this)" id="ltab-py" role="tab"><span class="dot" style="background:#3b82f6"></span>Python</button>
                <button class="lang-tab-btn" onclick="switchLang('c',this)" id="ltab-c" role="tab"><span class="dot" style="background:#60a5fa"></span>C</button>
                <button class="lang-tab-btn" onclick="switchLang('cpp',this)" id="ltab-cpp" role="tab"><span class="dot" style="background:#f97316"></span>C++</button>
                <button class="lang-tab-btn" onclick="switchLang('curl',this)" id="ltab-curl" role="tab"><span class="dot" style="background:#10b981"></span>cURL</button>
            </div>

            <!-- Python Panel -->
            <div class="lang-panel show" id="lpanel-py">
                <div class="lang-panel-header">
                    <span>send_data.py Â· pip install requests</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-py',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-py">import requests
import random
import time

API_URL = "https://dtaiotweb.pythonanywhere.com/api/feed_data"

API_KEY = "2fa9028412ad3d3fa8bb4a81a7dc4cd6c04d6a74f159ca61fe137ded0b01894b"
FEED_NAME = "name"

while True:
    value = round(random.uniform(20.0, 40.0), 2)  # random sensor value

    payload = {
        "api_key": API_KEY,
        "feed_name": FEED_NAME,
        "value": value
    }

    try:
        response = requests.post(API_URL, json=payload, timeout=5)
        print("Sent:", payload, "| Response:", response.json())
    except Exception as e:
        print("Error:", e)

    time.sleep(3)  # send every 3 seconds</code>
                </div>
            </div>

            <!-- C Panel -->
            <div class="lang-panel" id="lpanel-c">
                <div class="lang-panel-header">
                    <span>send_data.c Â· gcc send_data.c -o send_data -lcurl</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-c',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-c">/* Linux: sudo apt install libcurl4-openssl-dev
   macOS: brew install curl                        */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;curl/curl.h&gt;

#define API_URL   "https://dtaiotweb.pythonanywhere.com/api/feed_data"
#define API_KEY   "YOUR_API_KEY"
#define FEED_NAME "name"
#define INTERVAL  3

float read_sensor() {
    return 20.0f + (rand() % 2000) / 100.0f;
}

int main() {
    curl_global_init(CURL_GLOBAL_ALL);
    CURL *curl; CURLcode res;

    while (1) {
        float value = read_sensor();
        char json_body[256];
        snprintf(json_body, sizeof(json_body),
            "{\"api_key\":\"%s\",\"feed_name\":\"%s\",\"value\":%.2f}",
            API_KEY, FEED_NAME, value);

        curl = curl_easy_init();
        if (curl) {
            struct curl_slist *headers = NULL;
            headers = curl_slist_append(headers, "Content-Type: application/json");
            curl_easy_setopt(curl, CURLOPT_URL,       API_URL);
            curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
            curl_easy_setopt(curl, CURLOPT_POSTFIELDS, json_body);
            res = curl_easy_perform(curl);
            if (res != CURLE_OK)
                fprintf(stderr, "Error: %s\n", curl_easy_strerror(res));
            else
                printf("Sent: %.2f\n", value);
            curl_slist_free_all(headers);
            curl_easy_cleanup(curl);
        }
        sleep(INTERVAL);
    }
    curl_global_cleanup();
    return 0;
}</code>
                </div>
            </div>

            <!-- C++ Panel -->
            <div class="lang-panel" id="lpanel-cpp">
                <div class="lang-panel-header">
                    <span>send_data.cpp Â· g++ -std=c++17 send_data.cpp -o send_data -lcurl</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-cpp',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-cpp">// Linux: sudo apt install libcurl4-openssl-dev
// macOS: brew install curl
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;thread&gt;
#include &lt;chrono&gt;
#include &lt;cstdlib&gt;
#include &lt;curl/curl.h&gt;

const std::string API_URL   = "https://dtaiotweb.pythonanywhere.com/api/data";
const std::string API_KEY   = "YOUR_API_KEY";
const std::string FEED_NAME = "name";

float readSensor() {
    return 20.0f + (rand() % 2000) / 100.0f;
}

void sendData(float value) {
    CURL *curl = curl_easy_init();
    if (!curl) return;
    std::string body =
        "{\"api_key\":\""   + API_KEY +
        "\",\"feed_name\":\"" + FEED_NAME +
        "\",\"value\":"     + std::to_string(value) + "}";
    struct curl_slist *headers = nullptr;
    headers = curl_slist_append(headers, "Content-Type: application/json");
    curl_easy_setopt(curl, CURLOPT_URL, API_URL.c_str());
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, body.c_str());
    CURLcode res = curl_easy_perform(curl);
    if (res != CURLE_OK) {
        std::cerr &lt;&lt; "Error: " &lt;&lt; curl_easy_strerror(res) &lt;&lt; "\n";
    } else {
        std::cout &lt;&lt; "Data sent successfully!\n";
    }

    curl_slist_free_all(headers);
    curl_easy_cleanup(curl);
}

int main() {
    curl_global_init(CURL_GLOBAL_ALL);
    while (true) {
        sendData(readSensor());
        std::this_thread::sleep_for(std::chrono::seconds(3));
    }
    curl_global_cleanup();
    return 0;
}</code>
                </div>
            </div>

            <!-- cURL Panel -->
            <div class="lang-panel" id="lpanel-curl">
                <div class="lang-panel-header">
                    <span>terminal â€” Linux / macOS / Windows WSL</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-curl',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-curl"># One-shot test
curl -X POST https://dtaiotweb.pythonanywhere.com/api/feed_data \
     -H "Content-Type: application/json" \
     -d '{"api_key":"YOUR_API_KEY","feed_name":"name","value":25.50}'

# Loop every 3 seconds (Linux / macOS)
while true; do
  VALUE=$(python3 -c "import random; print(round(random.uniform(20,40),2))")
  curl -s -X POST https://dtaiotweb.pythonanywhere.com/api/feed_data \
       -H "Content-Type: application/json" \
       -d "{\"api_key\":\"YOUR_API_KEY\",\"feed_name\":\"name\",\"value\":$VALUE}"
  echo "Sent: $VALUE"
  sleep 3
done</code>
                </div>
            </div>

            <!-- Dashboard Widget Example -->
            <p class="sub-section-title">Dashboard / Widget API</p>
            <p style="font-size:0.82rem;color:#6b7280;margin:0 0 0.5rem 0;line-height:1.6;">
                Use <code style="background:#1f2937;color:#10b981;padding:0.1rem 0.35rem;border-radius:3px;font-size:0.72rem;">/api/data</code> to send a value to a specific widget on a named dashboard.
            </p>

            <div class="lang-tabs" role="tablist" style="margin-top:0.75rem;">
                <button class="lang-tab-btn active" onclick="switchLang2('dpy',this)" id="ltab2-dpy" role="tab"><span class="dot" style="background:#3b82f6"></span>Python</button>
                <button class="lang-tab-btn" onclick="switchLang2('dc',this)" id="ltab2-dc" role="tab"><span class="dot" style="background:#3b82f6"></span>C</button>
                <button class="lang-tab-btn" onclick="switchLang2('dcpp',this)" id="ltab2-dcpp" role="tab"><span class="dot" style="background:#3b82f6"></span>C++</button>
                <button class="lang-tab-btn" onclick="switchLang2('dcurl',this)" id="ltab2-dcurl" role="tab"><span class="dot" style="background:#10b981"></span>cURL</button>
            </div>

            <div class="lang-panel show" id="lpanel2-dpy">
                <div class="lang-panel-header">
                    <span>dashboard_send.py Â· pip install requests</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-dpy',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-dpy">import requests
import time
import random

URL = "https://dtaiotweb.pythonanywhere.com/api/data"

API_KEY = "2fa9028412ad3d3fa8bb4a81a7dc4cd6c04d6a74f159ca61fe137ded0b01894b"
DASHBOARD = "name"
WIDGET = "name"

while True:
    payload = {
        "api_key": API_KEY,
        "dashboard": DASHBOARD,
        "widget": WIDGET,
        "value": round(random.uniform(30, 40), 2)
    }

    r = requests.post(URL, json=payload)
    print(r.json())

    time.sleep(2)</code>
                </div>
            </div>
             <div class="lang-panel" id="lpanel2-dc">
                <div class="lang-panel-header">
                    <span>terminal â€” dashboard widget POST</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-dc',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-dc">/* Linux: sudo apt install libcurl4-openssl-dev
   macOS: brew install curl                        */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;curl/curl.h&gt;

#define API_URL   "https://dtaiotweb.pythonanywhere.com/api/data"
#define API_KEY   "YOUR_API_KEY"
#define DASHBOARD "name"
#define WIDGET    "name"

int main() {
    CURL *curl;
    CURLcode res;

    char json_body[256];
    snprintf(json_body, sizeof(json_body),
        "{\"api_key\":\"%s\",\"dashboard\":\"%s\",\"widget\":\"%s\",\"value\":%.2f}",
        API_KEY, DASHBOARD, WIDGET, 26.5);

    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();
    if (curl) {
        struct curl_slist *headers = NULL;
        headers = curl_slist_append(headers, "Content-Type: application/json");

        curl_easy_setopt(curl, CURLOPT_URL, API_URL);
        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, json_body);

        res = curl_easy_perform(curl);
        if (res != CURLE_OK) {
            fprintf(stderr, "curl_easy_perform() failed: %s\n", curl_easy_strerror(res));
        } else {
            printf("Data sent successfully!\n");
        }

        curl_slist_free_all(headers);
        curl_easy_cleanup(curl);
    }
    curl_global_cleanup();

    return 0;
}</code>
                </div>
            </div> <div class="lang-panel" id="lpanel2-dcpp">
                <div class="lang-panel-header">
                    <span>terminal â€” dashboard widget POST</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-dcpp',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-dcpp">// Linux: sudo apt install libcurl4-openssl-dev
// macOS: brew install curl
#include <iostream>
#include <string>
#include <curl/curl.h>

const std::string API_URL   = "https://dtaiotweb.pythonanywhere.com/api/data";
const std::string API_KEY   = "YOUR_API_KEY";
const std::string DASHBOARD = "name";
const std::string WIDGET    = "name";

float readSensor() {
    return 26.5f; // Replace with actual sensor reading logic
}

void sendData(float value) {
    CURL *curl = curl_easy_init();
    if (!curl) return;

    std::string body =
        "{\"api_key\":\"" + API_KEY +
        "\",\"dashboard\":\"" + DASHBOARD +
        "\",\"widget\":\"" + WIDGET +
        "\",\"value\":" + std::to_string(value) + "}";

    struct curl_slist *headers = nullptr;
    headers = curl_slist_append(headers, "Content-Type: application/json");

    curl_easy_setopt(curl, CURLOPT_URL, API_URL.c_str());
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, body.c_str());

    CURLcode res = curl_easy_perform(curl);
    if (res != CURLE_OK) {
        std::cerr << "Error: " << curl_easy_strerror(res) << "\n";
    } else {
        std::cout << "Data sent successfully!\n";
    }

    curl_slist_free_all(headers);
    curl_easy_cleanup(curl);
}

int main() {
    curl_global_init(CURL_GLOBAL_ALL);
    sendData(readSensor());
    curl_global_cleanup();
    return 0;
}</code>
                </div>
            </div>

            <div class="lang-panel" id="lpanel2-dcurl">
                <div class="lang-panel-header">
                    <span>terminal â€” dashboard widget POST</span>
                    <button class="btn-copy-code" onclick="copyLangCode('lcode-dcurl',this)">Copy</button>
                </div>
                <div class="code-block" style="margin:0;border-radius:0 0 8px 8px;">
<code id="lcode-dcurl">curl -X POST https://dtaiotweb.pythonanywhere.com/api/data \
     -H "Content-Type: application/json" \
     -d '{
           "api_key":   "YOUR_API_KEY",
           "dashboard": "name",
           "widget":    "name",
           "value":     26.5
         }'

</code>
                </div>
            </div>

            <!-- Reference Table -->
            <div class="code-explain">
                <div class="explain-title">What each field does</div>
                <div class="explain-row">
                    <span class="explain-code">API_URL</span>
                    <span class="explain-text">The server endpoint. Use <code style="color:#10b981;font-size:0.7rem;">/api/feed_data</code> for feeds or <code style="color:#10b981;font-size:0.7rem;">/api/data</code> for dashboard widgets.</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">api_key</span>
                    <span class="explain-text">Your secret key â€” proves to the server it's really you. Keep it private like a password. Copy it from the top of this page.</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">feed_name</span>
                    <span class="explain-text">Name of your data channel (Feed API). You can have multiple feeds e.g. "name", "Humidity" â€” each stores separately.</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">dashboard + widget</span>
                    <span class="explain-text">Dashboard API only. "dashboard" is the name of your dashboard page; "widget" is the name of the element inside it that receives the value.</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">value</span>
                    <span class="explain-text">The numeric sensor reading to store. Must be a number (integer or decimal). Strings like "hot" will return a 400 Value Type Error.</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">HTTP POST</span>
                    <span class="explain-text">Both endpoints require POST. Using GET returns 405. Always include the <code style="color:#10b981;font-size:0.7rem;">Content-Type: application/json</code> header.</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">sleep / time.sleep</span>
                    <span class="explain-text">Pauses the loop between sends. Keep it at 3+ seconds to stay within rate limits (max 5 requests per 10 seconds per API key).</span>
                </div>
                <div class="explain-row">
                    <span class="explain-code">try / except</span>
                    <span class="explain-text">Catches Wi-Fi drops and server timeouts so the script doesn't crash mid-run â€” it prints the error and continues on the next loop.</span>
                </div>
            </div>
        </div><!-- /code examples card -->

        <!-- â”€â”€ Error Reference â”€â”€ -->
        <div class="help-card">
            <div class="help-card-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                <h4>API Error Reference</h4>
            </div>

            <!-- Feed Data Errors -->
            <p class="sub-section-title">Feed Data API &nbsp;Â·&nbsp; <code style="font-size:0.68rem;background:#1f2937;color:#10b981;padding:0.1rem 0.4rem;border-radius:3px;">/api/feed_data</code></p>

            <!-- Mobile cards (shown < 480px) -->
            <div class="error-cards">
                <div class="error-card"><div class="error-card-top"><span class="badge badge-blue">405</span><span class="msg-code">"POST required"</span></div><div class="error-card-code"><strong>POST required</strong></div><div class="error-card-body"><strong>Cause:</strong> Used GET instead of POST.<br><strong>Fix:</strong> Send using POST method only.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-orange">400</span><span class="msg-code">"Invalid JSON"</span></div><div class="error-card-code"><strong>Invalid JSON</strong></div><div class="error-card-body"><strong>Cause:</strong> Malformed or non-JSON body.<br><strong>Fix:</strong> Validate JSON before sending.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-orange">400</span><span class="msg-code">"Missing fields"</span></div><div class="error-card-code"><strong>Missing fields</strong></div><div class="error-card-body"><strong>Cause:</strong> <code>api_key</code> or <code>feed_name</code> missing.<br><strong>Fix:</strong> Include all required fields.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-red">401</span><span class="msg-code">"Authentication failed"</span></div><div class="error-card-code"><strong>Authentication failed</strong></div><div class="error-card-body"><strong>Cause:</strong> Invalid key or feed doesn't exist.<br><strong>Fix:</strong> Check key and feed name.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-orange">400</span><span class="msg-code">"Value required"</span></div><div class="error-card-code"><strong>Value required</strong></div><div class="error-card-body"><strong>Cause:</strong> <code>value</code> field missing.<br><strong>Fix:</strong> Always include a numeric value.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-orange">400</span><span class="msg-code">"Value Type Error"</span></div><div class="error-card-code"><strong>Value Type Error</strong></div><div class="error-card-body"><strong>Cause:</strong> Value is not a number.<br><strong>Fix:</strong> Convert to float before sending.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-purple">403</span><span class="msg-code">"Rate limit exceeded"</span></div><div class="error-card-code"><strong>Rate limit exceeded</strong></div><div class="error-card-body"><strong>Cause:</strong> Too many requests too fast.<br><strong>Fix:</strong> Increase <code>sleep</code> to 3+ seconds.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-gray">500</span><span class="msg-code">"Internal Server Error"</span></div><div class="error-card-code"><strong>Server Error</strong></div><div class="error-card-body"><strong>Cause:</strong> Unhandled server exception.<br><strong>Fix:</strong> Retry after a few seconds.</div></div>
            </div>

            <!-- Desktop table (hidden < 480px) -->
            <div class="error-table-wrap">
                <table class="error-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Error</th>
                            <th>Cause</th>
                            <th>Fix</th>
                            <th>Response msg</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><span class="badge badge-blue">405</span></td><td>POST required</td><td>Used GET instead of POST</td><td>Send using POST method</td><td><span class="msg-code">"POST required"</span></td></tr>
                        <tr><td><span class="badge badge-orange">400</span></td><td>Invalid JSON</td><td>Body is malformed or not JSON</td><td>Validate JSON before sending</td><td><span class="msg-code">"Invalid JSON"</span></td></tr>
                        <tr><td><span class="badge badge-orange">400</span></td><td>Missing fields</td><td><code>api_key</code> or <code>feed_name</code> absent</td><td>Include all required fields</td><td><span class="msg-code">"Missing fields"</span></td></tr>
                        <tr><td><span class="badge badge-red">401</span></td><td>Authentication failed</td><td>Invalid key or feed not found</td><td>Check key and ensure feed exists</td><td><span class="msg-code">"Authentication failed"</span></td></tr>
                        <tr><td><span class="badge badge-orange">400</span></td><td>Value required</td><td><code>value</code> missing in payload</td><td>Always include numeric value</td><td><span class="msg-code">"Value required"</span></td></tr>
                        <tr><td><span class="badge badge-orange">400</span></td><td>Value Type Error</td><td><code>value</code> is not a number</td><td>Convert to float before sending</td><td><span class="msg-code">"Value Type Error"</span></td></tr>
                        <tr><td><span class="badge badge-purple">403</span></td><td>Rate limit exceeded</td><td>Too many requests per second</td><td>Increase sleep to 3+ seconds</td><td><span class="msg-code">"Rate limit exceeded"</span></td></tr>
                        <tr><td><span class="badge badge-gray">500</span></td><td>Server Error</td><td>Unhandled server exception</td><td>Retry â€” server-side issue</td><td><span class="msg-code">"Internal Server Error"</span></td></tr>
                    </tbody>
                </table>
            </div>

            <!-- Dashboard Widget Errors -->
            <p class="sub-section-title" style="margin-top:1.5rem;">Dashboard &amp; Widget API &nbsp;Â·&nbsp; <code style="font-size:0.68rem;background:#1f2937;color:#10b981;padding:0.1rem 0.4rem;border-radius:3px;">/api/data</code></p>

            <!-- Mobile cards -->
            <div class="error-cards">
                <div class="error-card"><div class="error-card-top"><span class="badge badge-red">401</span><span class="msg-code">"Authentication failed"</span></div><div class="error-card-body"><strong>Cause:</strong> Invalid key, dashboard, or widget name.<br><strong>Fix:</strong> Verify all three match exactly.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-orange">400</span><span class="msg-code">"Value required"</span></div><div class="error-card-body"><strong>Cause:</strong> <code>value</code> field missing.<br><strong>Fix:</strong> Always include a numeric value.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-orange">400</span><span class="msg-code">"Value Type Error"</span></div><div class="error-card-body"><strong>Cause:</strong> Value cannot convert to float.<br><strong>Fix:</strong> Ensure value is numeric.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-purple">403</span><span class="msg-code">"Rate limit exceeded"</span></div><div class="error-card-body"><strong>Cause:</strong> Too many requests from same key.<br><strong>Fix:</strong> Add <code>sleep(3)</code> between sends.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-blue">405</span><span class="msg-code">"POST only"</span></div><div class="error-card-body"><strong>Cause:</strong> Used GET method.<br><strong>Fix:</strong> Use POST only.</div></div>
                <div class="error-card"><div class="error-card-top"><span class="badge badge-yellow">404</span><span class="msg-code">"Widget not found"</span></div><div class="error-card-body"><strong>Cause:</strong> Widget doesn't exist in dashboard.<br><strong>Fix:</strong> Create the widget first in the dashboard UI.</div></div>
            </div>

            <!-- Desktop table -->
            <div class="error-table-wrap">
                <table class="error-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Error</th>
                            <th>Cause</th>
                            <th>Fix</th>
                            <th>Response msg</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><span class="badge badge-red">401</span></td><td>Authentication failed</td><td>Invalid key / dashboard / widget</td><td>Verify all three match exactly</td><td><span class="msg-code">"Authentication failed"</span></td></tr>
                        <tr><td><span class="badge badge-orange">400</span></td><td>Value required</td><td>Widget value missing in POST</td><td>Always include numeric value</td><td><span class="msg-code">"Value required"</span></td></tr>
                        <tr><td><span class="badge badge-orange">400</span></td><td>Value Type Error</td><td>Value not convertible to float</td><td>Ensure value is numeric</td><td><span class="msg-code">"Value Type Error"</span></td></tr>
                        <tr><td><span class="badge badge-purple">403</span></td><td>Rate limit exceeded</td><td>Too many requests same key</td><td>Add sleep(3) between sends</td><td><span class="msg-code">"Rate limit exceeded"</span></td></tr>
                        <tr><td><span class="badge badge-blue">405</span></td><td>POST only</td><td>GET request to POST endpoint</td><td>Use POST method only</td><td><span class="msg-code">"POST only"</span></td></tr>
                        <tr><td><span class="badge badge-yellow">404</span></td><td>Widget not found</td><td>Widget doesn't exist in dashboard</td><td>Create widget in dashboard UI first</td><td><span class="msg-code">"Widget not found"</span></td></tr>
                    </tbody>
                </table>
            </div>

            <div class="inline-note">
                ðŸ’¡ <strong>Rate limit:</strong> max <strong>5 requests per 10 seconds</strong> per API key on both endpoints. Keep <code>sleep</code> at 3+ seconds to stay within limits.
            </div>
        </div><!-- /error reference card -->

        <!-- Troubleshooting FAQ -->
        <div class="help-card">
            <div class="help-card-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>
                <h4>Troubleshooting FAQ</h4>
            </div>
            <div class="help-content">
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>API Key Not Working?</strong></div>
                    <p class="faq-answer">Copy the entire key with no extra spaces. The JSON field must be exactly <code>api_key</code> (lowercase, underscore). Try regenerating your key if the issue persists.</p>
                </div>
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>Getting 401 Unauthorized?</strong></div>
                    <p class="faq-answer">Your key is missing or invalid. Also confirm <code>Content-Type: application/json</code> is set â€” without it the server cannot parse your data. For the dashboard endpoint, check that both <code>dashboard</code> and <code>widget</code> names match exactly.</p>
                </div>
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>403 Rate Limit Exceeded?</strong></div>
                    <p class="faq-answer">You're sending too fast (limit: 5 requests per 10 seconds). Increase the <code>sleep</code> value in your script â€” change <code>1</code> to <code>3</code> or higher. This applies to both <code>/api/feed_data</code> and <code>/api/data</code>.</p>
                </div>
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>404 Widget Not Found?</strong></div>
                    <p class="faq-answer">The widget name in your script doesn't match any widget in your dashboard. Log into the dashboard UI, check the exact widget name, and make sure it's spelled identically in your <code>payload["widget"]</code>.</p>
                </div>
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>400 Value Type Error?</strong></div>
                    <p class="faq-answer">The <code>value</code> field must be a number. Wrap it in <code>float()</code> before sending: <code>float(sensor.read())</code>. Strings like <code>"hot"</code> or <code>"N/A"</code> will always return this error.</p>
                </div>
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>libcurl Not Found (C / C++)?</strong></div>
                    <p class="faq-answer">Install: <code>sudo apt install libcurl4-openssl-dev</code> (Linux) or <code>brew install curl</code> (macOS). Always compile with the <code>-lcurl</code> flag.</p>
                </div>
                <div class="faq-item">
                    <div class="faq-question"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg><strong>requests Module Not Found (Python)?</strong></div>
                    <p class="faq-answer">Run <code>pip install requests</code> in your terminal. On Raspberry Pi use <code>pip3 install requests</code>. On some systems use <code>pip3 install requests --break-system-packages</code>.</p>
                </div>
            </div>
        </div><!-- /troubleshooting -->

        <!-- Contact Support -->
        <div class="support-card">
            <div class="support-content">
                <div class="support-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                </div>
                <div class="support-text">
                    <h4>Need More Help?</h4>
                    <p>Our support team is ready to help with any questions or issues.</p>
                </div>
            </div>
            <div class="support-actions">
                <a href="mailto:support@digitoadtech.com" class="support-button primary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                    Email Support
                </a>
                <a href="#" class="support-button secondary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                    View Documentation
                </a>
            </div>
        </div>

    </div><!-- /help-section -->
</div><!-- /profile-container -->

<script>
    /* â”€â”€ Feed Data lang tabs â”€â”€ */
    const langs = ['py','c','cpp','curl'];
    function switchLang(lang, btn) {
        langs.forEach(function(l) {
            document.getElementById('lpanel-' + l).classList.remove('show');
            document.getElementById('ltab-' + l).classList.remove('active');
        });
        document.getElementById('lpanel-' + lang).classList.add('show');
        btn.classList.add('active');
    }

    /* â”€â”€ Dashboard lang tabs â”€â”€ */
    const langs2 = ['dpy', 'dc','dcpp', 'dcurl'];
    function switchLang2(lang, btn) {
        langs2.forEach(function(l) {
            document.getElementById('lpanel2-' + l).classList.remove('show');
            document.getElementById('ltab2-' + l).classList.remove('active');
        });
        document.getElementById('lpanel2-' + lang).classList.add('show');
        btn.classList.add('active');
    }

    /* â”€â”€ Copy code snippets â”€â”€ */
    function copyLangCode(id, btn) {
        const text = document.getElementById(id).innerText;
        navigator.clipboard.writeText(text).then(function() {
            const orig = btn.textContent;
            btn.textContent = 'Copied!';
            setTimeout(function() { btn.textContent = orig; }, 2000);
        }).catch(function() {
            const t = document.createElement('textarea');
            t.value = text; t.style.position = 'fixed'; t.style.left = '-9999px';
            document.body.appendChild(t); t.select();
            try { document.execCommand('copy'); btn.textContent = 'Copied!'; setTimeout(function(){ btn.textContent = 'Copy'; }, 2000); } catch(e) {}
            document.body.removeChild(t);
        });
    }

    /* â”€â”€ Copy API key â”€â”€ */
    function copyApiKey() {
        const apiKey = document.getElementById('apiKey').textContent.trim();
        const copyButton = document.querySelector('.copy-button');
        const copyText = document.getElementById('copyText');
        const copyIcon = document.getElementById('copyIcon');
        navigator.clipboard.writeText(apiKey).then(() => {
            copyButton.classList.add('copied');
            copyText.textContent = 'Copied!';
            copyIcon.innerHTML = '<polyline points="20 6 9 17 4 12"></polyline>';
            setTimeout(() => {
                copyButton.classList.remove('copied');
                copyText.textContent = 'Copy';
                copyIcon.innerHTML = '<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>';
            }, 2000);
        }).catch(() => {
            const t = document.createElement('textarea');
            t.value = apiKey; t.style.position = 'fixed'; t.style.left = '-9999px';
            document.body.appendChild(t); t.select();
            try { document.execCommand('copy'); copyButton.classList.add('copied'); copyText.textContent = 'Copied!'; setTimeout(() => { copyButton.classList.remove('copied'); copyText.textContent = 'Copy'; }, 2000); } catch(e) {}
            document.body.removeChild(t);
        });
    }
</script>

{% endblock %}